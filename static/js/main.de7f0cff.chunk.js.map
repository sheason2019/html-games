{"version":3,"sources":["cells/init.js","cells/cellsSlice.js","cells/Card.js","cells/Collections.js","cells/Slots.js","cells/ControlBar.js","cells/End.js","cells/FAB.js","cells/Column.js","cells/GamePanel.js","cells/Help.js","cells/Message.js","cells/Welcome.js","cells/index.js","layout/Header.js","tower-defense/battleland.js","tower-defense/monster.js","tower-defense/monsters.js","tower-defense/constant.js","tower-defense/tower.js","tower-defense/towers.js","tower-defense/attack-range.js","tower-defense/bullets/initCanvas.js","tower-defense/bullets/index.js","tower-defense/index.js","lib/canvas-in-react/Canvas.js","lib/canvas-in-react/Layer.js","lib/canvas-in-react/Shape.js","lib/canvas-in-react/util/handleGetData.js","lib/canvas-in-react/Rect.js","lib/canvas-in-react/Group.js","lib/canvas-in-react/useData.js","lib/canvas-in-react/Text.js","russia-cube/components/gameitem/gameitem-interval.js","russia-cube/components/gameitem/index.js","russia-cube/util/initGame.js","russia-cube/components/score/index.js","russia-cube/components/slice/index.js","russia-cube/components/gamepanel/pause.js","russia-cube/components/gamepanel/index.js","russia-cube/components/preview/index.js","russia-cube/russia-cube.js","russia-cube/components/welcome/index.js","russia-cube/index.js","gamelist/router.js","gamelist/component/card.js","gamelist/index.js","App.js","serviceWorkerRegistration.js","reportWebVitals.js","store.js","index.js"],"names":["initColumns","columns","i","push","initSlots","slots","initCollections","collections","initialState","time","temp","index","stack","type","start","status","message","open","text","message_id","history","justCancel","blockAutoCollection","cellsSlice","createSlice","name","reducers","initColumn","state","cards","j","value","color","initCards","length","cardIndex","Math","floor","random","splice","selectColumn","payload","Object","assign","timeStamp","Date","now","moveCard","target","moveableLength","slot","filter","item","empty","getMoveLength","getTime","min","pop","reverse","moveToSlot","moveToCollection","isEnd","forEach","localStorage","setItem","parseInt","getItem","setTime","setMessage","setStatus","pushIntoHistory","cancelAction","actions","CardContainer","styled","div","props","last","selected","Para","Icon","Backdrop","getCardValue","num","String","Card","ref","React","useRef","useState","shouldMove","setShouldMove","onMouseMove","e","onMouseDown","onMouseUp","backdrop","data","EmptyCard","EmptyContainer","ColorBackground","Collections","useSelector","cells","dispatch","useDispatch","map","collection","onClick","stopPropagation","handleOnClick","Collection","style","position","zIndex","top","Empty","handleClickSlot","useCallback","checkToCollection","useEffect","BarContainer","TimeContainer","Time","TimeCounter","ControlBar","setTimeout","EndWrapper","EndContainer","InfoContainer","InfoItem","NewGameButton","MenuButton","End","completedPatch","current","marginTop","FloatActionButton","right","bottom","left","FAB","children","ColumnWrapper","Column","moveInfo","column","result","allowMove","tryMoveCard","undefined","unshift","searchMoveableCard","resetSelected","shouldBackdropOpen","button","slotsInfo","allow","couldToSlot","couldToCollection","card","show","MoveAbleColumnWrapper","space","MoveAbleColumn","handleOnDoubleClick","console","log","sourceTime","ColumnContainer","GamePanel","HelpContainer","HelpItem","Help","textAlign","MessageContainer","Message","timeout","timestamp","handleCloseMessage","clearTimeout","userSelect","WelcomeContainer","WelcomeItem","disable","Welcome","useHistory","display","Background","Cells","content","shortcut","Map","handleCancelAction","document","onkeydown","set","code","get","onkeyup","onContextMenu","preventDefault","HeaderContainer","Title","Header","Row","Block","Wall","Road","MapBlock","Battleland","handleSetDomForMap","gameMap","row","rowIndex","itemIndex","MonsterContainer","Blank","maxHp","hp","Hp","Monster","roadMap","monsters","speed","removeMonster","monsterId","step","setStep","coordinate","setCoordinate","monsterRef","timeoutRef","x","y","dom","monsterDom","offsetTop","offsetHeight","offsetLeft","offsetWidth","transition","useLayoutEffect","id","Monsters","defaultRoadmap","monstersModel","monster","TOWER_TYPE","attack_range","attack_point","TowerNode","Bullet","Tower","towers","setCenterNode","requestFire","towerId","CD","towerCoordinate","setTowerCoordinate","towerRef","handleShouldAttack","coordinate_tower","coordinate_monster","A","B","source","component","tower","setInterval","clearInterval","shouldPush","onMouseEnter","onMouseLeave","Towers","towersModel","StyledAttackRange","radius","AttackRange","centerNode","attackRangeRef","OpacityFunc","process","NormalBullet","bullet","towerAttack","this","sourceCoordinate","targetCoordinate","every","monster_coordinate","distance","draw","ctx","beginPath","fillStyle","arc","PI","strokeStyle","fill","stroke","initCanvas","canvas","bulletsModel","width","window","innerWidth","height","innerHeight","getContext","clearRect","Frame","Bullets","interval","canvasRef","GameContainer","TowerDefense","DemoMap","setDemoMap","setMonstersModel","roadmap","initRoadMap","bulletKey","initMap","col","newDemoMap","newMonstersModel","deleteIndex","key","cleanBullet","newBulletsModel","Canvas","Children","child","cloneElement","Layer","clear","fps","updateStackForLayer","renderOnMount","shapes","frameKey","setCtx","renderer","updater","frames","func","render","Shape","lastFrameKey","shapeId","Symbol","shape_id","handleGetData","prop","Rect","size","lineWidth","Width","Height","Coordinate","Size","Color","fillRect","strokeRect","Group","useData","shouldExecPerFrameRef","registUpdateFunc","insertTo","removeUpdateFunc","obj","Text","font","align","fillText","intervalArray","StartInterval","GameItem","preview","colorRef","opacity","gameModel","fallingBlock","shape","initFallingBlock","JSON","parse","stringify","offset","initTransform","group","point","registBlock","nextKey","regenerateNextKey","getKey","next","score","initScore","RussiaCubeSlice","setState","pause","getPause","initGameModel","gameModelRef","transfromModel","cube","initGame","move","where","changedRow","shouldSpliceRow","Array","from","Set","sort","a","b","eliminateScore","lastPoint","targetShape","merge","handlePause","initKey","columnIndex","Preview","setNextKey","setRegenerateNextKey","stateTitle","stateDescribe","stateDescribe2","Container","RussiaCube","variableSize","Item","RussiaCubeRouter","router","title","link","CardWrapper","GameListWrapper","GameListContainer","Cards","h1","GameList","to","textDecoration","App","path","exact","Boolean","location","hostname","match","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","store","configureStore","reducer","cellsReducer","russiaCubeReducer","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.de7f0cff.chunk.js","sourcesContent":["export function initCards() {\n  const cards = [];\n  for (let i = 0; i < 13; i++) {\n    for (let j = 0; j < 4; j++) {\n      cards.push({value: i, color: j})\n    }\n  }\n  return cards;\n}\n\nexport function initColumns() {\n  const columns = [];\n  for (let i = 0; i < 8; i++) {\n    columns.push([]);\n  }\n  return columns;\n}\n\nexport function initSlots() {\n  const slots = [];\n  for (let i = 0; i < 4; i++) {\n    slots.push(null);\n  }\n  return slots;\n}\n\nexport function initCollections() {\n  const collections = [];\n  for (let i = 0; i < 4; i++) {\n    collections.push([]);\n  }\n  return collections;\n}\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { initCards, initCollections, initColumns, initSlots } from \"./init\";\n\nconst getMoveLength = (slots, columns, target) => {\n  const slot = slots.filter((item) => item === null).length;\n  const empty = columns.filter(\n    (item, index) => item.length === 0 && index !== target\n  ).length;\n  return (slot + 1) * 2 ** empty;\n};\n\nconst initialState = {\n  // 耗时\n  time: 0,\n  // 左上角的插槽 index为 8-11\n  slots: initSlots(),\n  // 右上角的插槽\n  collections: initCollections(),\n  // 列\n  columns: initColumns(),\n  // 选中的栈\n  temp: {\n    index: -1,\n    stack: [],\n    type: \"column\",\n  },\n  // 游戏是否开始的标识符\n  start: false,\n  // status 游戏状态\n  status: \"index\",\n  // 提示信息的数据结构\n  message: {\n    open: false,\n    text: \"\",\n    message_id: 0,\n  },\n  history: [],\n  justCancel: false,\n  blockAutoCollection: false,\n};\n\nexport const cellsSlice = createSlice({\n  name: \"cells\",\n  initialState,\n  reducers: {\n    initColumn(state) {\n      const cards = initCards();\n      const columns = initColumns();\n      let index = 0;\n      while (cards.length > 0) {\n        const cardIndex = Math.floor(Math.random() * cards.length);\n        const temp = cards.splice(cardIndex, 1)[0];\n        columns[index++].push(temp);\n        if (index > 7) {\n          index = 0;\n        }\n      }\n      state.columns = columns;\n      state.history = [];\n      state.collections = initCollections();\n      state.slots = initSlots();\n      state.time = 0;\n      state.start = false;\n      state.blockAutoCollection = false;\n    },\n    selectColumn(state, payload) {\n      Object.assign(state.temp, payload.payload, { timeStamp: Date.now() });\n    },\n    moveCard(state, payload) {\n      const { target, length } = payload.payload;\n      const moveableLength = getMoveLength(state.slots, state.columns, target);\n      if (state.temp.index === -1) {\n        return;\n      } else if (length > moveableLength) {\n        if (state.columns[target].length !== 0) {\n          state.message.open = true;\n          state.message.text = `移动卡牌失败，您试图移动${length}张牌，但现在只能移动${moveableLength}张`;\n          state.message.message_id = new Date().getTime();\n          return;\n        }\n      }\n      if (state.temp.type === \"column\") {\n        const stack = [];\n        for (let i = 0; i < Math.min(length, moveableLength); i++) {\n          const item = state.columns[state.temp.index].pop();\n          stack.push(item);\n        }\n        stack.reverse();\n        for (let i of stack) {\n          state.columns[target].push(i);\n        }\n        state.temp = { index: -1, stack: [] };\n      } else if (state.temp.type === \"slot\") {\n        state.columns[target].push(state.slots[state.temp.index]);\n        state.slots[state.temp.index] = null;\n      }\n      state.start = true;\n      state.blockAutoCollection = false;\n    },\n    moveToSlot(state, payload) {\n      const { target } = payload.payload;\n      if (state.temp.stack.length === 0 || state.slots[target] !== null) {\n        return;\n      } else {\n        let item;\n        if (state.temp.type === 'column') {\n          item = state.columns[state.temp.index].pop();\n        } else if (state.temp.type === 'slot') {\n          item = state.slots[state.temp.index];\n          state.slots[state.temp.index] = null;\n        } else {\n          return;\n        }\n        state.slots[target] = item;\n        state.temp.index = -1;\n        state.temp.stack = [];\n        state.start = true;\n        state.blockAutoCollection = false;\n      }\n    },\n    moveToCollection(state, payload) {\n      const { target } = payload.payload;\n      const index = state.temp.index;\n      if (state.temp.stack.length === 0) {\n        return;\n      } else {\n        let source;\n        let item;\n        if (state.temp.type === \"slot\") {\n          source = state.slots[index];\n          item = state.slots[index];\n          state.slots[index] = null;\n        } else if (state.temp.type === \"column\") {\n          source = state.columns[index];\n          item = source.pop();\n        }\n        state.collections[target].push(item);\n        state.temp = { index: -1, stack: [] };\n        state.start = true;\n        state.blockAutoCollection = false;\n      }\n      let isEnd = true;\n      state.collections.forEach((item) => {\n        if (item.length === 0) {\n          return;\n        } else if (item[item.length - 1].value !== 12) {\n          isEnd = false;\n        }\n      });\n      state.start = !isEnd;\n      if (isEnd) {\n        state.status = 'end';\n        localStorage.setItem('completePatch', parseInt(localStorage.getItem('completePatch')) + 1);\n      }\n    },\n    setTime(state, payload) {\n      state.time = payload.payload;\n    },\n    setMessage(state, payload) {\n      Object.assign(state.message, payload.payload);\n    },\n    setStatus(state, payload) {\n      state.status = payload.payload;\n    },\n    pushIntoHistory(state, payload) {\n      if (state.justCancel) {\n        state.justCancel = false;\n        return;\n      }\n      if (state.start) {\n        state.history.push(payload.payload);\n      } else {\n        state.history[0] = payload.payload;\n      }\n    },\n    cancelAction(state, payload) {\n      if (state.status === 'end') {\n        return;\n      }\n      if (state.history.length > 1) {\n        const item = payload.payload;\n        state.history.pop();\n        state.collections = Object.assign([], item.collections);\n        state.columns = Object.assign([], item.columns);\n        state.slots = Object.assign([], item.slots);\n        state.justCancel = true;\n        state.blockAutoCollection = true;\n        state.temp = {\n          index: -1,\n          stack: [],\n          type: 'column',\n        };\n      }\n    },\n  },\n});\n\nexport const {\n  initColumn,\n  selectColumn,\n  moveCard,\n  moveToSlot,\n  moveToCollection,\n  setTime,\n  setMessage,\n  setStatus,\n  cancelAction,\n  pushIntoHistory,\n} = cellsSlice.actions;\n\nexport default cellsSlice.reducer;\n","import styled from \"styled-components\";\nimport React from \"react\";\n\nconst CardContainer = styled.div`\n  width: 8rem;\n  height: 10rem;\n  background-color: white;\n  border-radius: 0.5rem;\n  margin-bottom: ${props => props.last ? 0 : '-7rem'};\n  box-shadow: ${props => props.selected ? '0px 1px 2px 4px rgba(0, 0, 0, 0.5)' : '0px 1px 2px 0px rgba(0, 0, 0, 0.75)'};\n  position: relative;\n  overflow: hidden;\n`;\nconst Para = styled.div`\n  font-size: 1.25rem;\n  display: flex;\n  padding-top: 0.25rem;\n  padding-left: 0.25rem;\n  color: ${(props) => (props.color % 2 === 0 ? \"black\" : \"red\")};\n  user-select: none;\n`;\nconst Icon = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 1.25rem;\n`;\nconst Backdrop = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.25);\n  visibility: ${props => props.open ? 'normal' : 'hidden'};\n`;\n\nconst color = [\"♠\", \"♥\", \"♣️\", \"♦️\"];\nconst getCardValue = (num) => {\n  switch (num) {\n    case 0:\n      return \"A\";\n    case 10:\n      return \"J\";\n    case 11:\n      return \"Q\";\n    case 12:\n      return \"K\";\n    default:\n      return String(num + 1);\n  }\n};\n\nfunction Card(props) {\n  const ref = React.useRef();\n  const [shouldMove, setShouldMove] = React.useState(false);\n  const handleOnMouseMove = (e) => {\n    return;\n  };\n  const handleOnMouseDown = () => {\n    setShouldMove(true);\n  };\n  const handleOnMouseUp = () => {\n    setShouldMove(false);\n  };\n  return (\n    <CardContainer\n      ref={ref}\n      shouldMove={shouldMove}\n      selected={props.selected}\n      last={props.last}\n      onMouseMove={handleOnMouseMove}\n      onMouseDown={handleOnMouseDown}\n      onMouseUp={handleOnMouseUp}\n    >\n      <Backdrop open={props.backdrop} />\n      <Para color={props.data.color}>\n        <Icon color={props.data.color}>{color[props.data.color]}</Icon>\n        <span>{getCardValue(props.data.value)}</span>\n      </Para>\n    </CardContainer>\n  );\n}\n\nexport default Card;\n","import { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\"\nimport Card from \"./Card\";\nimport { moveToCollection, selectColumn } from \"./cellsSlice\";\n\nconst EmptyCard = styled.div`\n  width: 8rem;\n  height: 10rem;\n  margin: 5px;\n  border: 1px solid white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  border-radius: 0.5rem;\n  user-select: none;\n`;\n\nconst EmptyContainer = styled.div`\n  display: flex;\n  padding: 5px;\n`;\n\nconst ColorBackground = styled.div`\n  color: ${props => props.index % 2 === 0 ? 'black' : 'red'};\n  font-size: 5rem;\n  opacity: 0.25;\n`;\n\nexport default function Collections() {\n  const collections = useSelector(state => state.cells.collections);\n  const selected = useSelector(state => state.cells.temp);\n  const dispatch = useDispatch();\n  const handleOnClick = (e, target) => {\n    e.stopPropagation();\n    const collection = collections[target];\n    const item = selected.stack[selected.stack.length - 1];\n    if (!item) {\n      return;\n    }\n    if (item.color === target && item.value === collection.length) {\n      dispatch(moveToCollection({target}));\n    }\n    dispatch(selectColumn({ index: -1, stack: [] }));\n  }\n  return (\n    <EmptyContainer>\n      {\n        collections.map((collection, index) => (\n          <EmptyCard key={index} onClick={(e) => handleOnClick(e, index)}>\n            <Collection collection={collection} index={index} />\n          </EmptyCard>\n        ))\n      }\n    </EmptyContainer>\n  )\n}\n\nfunction Collection({index, collection}) {\n  const colors = [\"♠\", \"♥\", \"♣️\", \"♦️\"];\n  if (collection.length === 0) {\n    return <ColorBackground index={index}>{colors[index]}</ColorBackground>;\n  } else {\n    return (\n      <div style={{ position: 'absolute', zIndex: collection.value, top: 0 }}>\n        <Card data={collection[collection.length - 1]} />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport Card from \"./Card\";\nimport { moveToSlot, selectColumn, moveToCollection } from \"./cellsSlice\";\n\nconst EmptyCard = styled.div`\n  width: 8rem;\n  height: 10rem;\n  margin: 5px;\n  border: 1px solid white;\n  border-radius: 0.5rem;\n`;\n\nconst EmptyContainer = styled.div`\n  display: flex;\n  padding: 5px;\n`;\n\nexport default function Empty() {\n  const dispatch = useDispatch();\n  const slots = useSelector((state) => state.cells.slots);\n  const temp = useSelector((state) => state.cells.temp);\n  const collections = useSelector((state) => state.cells.collections);\n  const start = useSelector(state => state.cells.start);\n  const blockAutoCollection = useSelector(state => state.cells.blockAutoCollection);\n  const handleClickSlot = React.useCallback(\n    (num) => {\n      if (slots[num] === null) {\n        dispatch(moveToSlot({ target: num }));\n      } else {\n        dispatch(\n          selectColumn({ index: num, stack: [slots[num]], type: \"slot\" })\n        );\n      }\n    },\n    [dispatch, slots]\n  );\n\n  const checkToCollection = React.useCallback(() => {\n    if (blockAutoCollection) {\n      return;\n    }\n    let min = 12;\n    collections.forEach(collection => {\n      if (collection.length === 0) {\n        min = 0;\n      } else if (collection[collection.length - 1].value < min) {\n        min = collection[collection.length - 1].value;\n      }\n    })\n\n    slots.forEach((item, index) => {\n      if (item === null) {\n        return;\n      } else if (item.value >= min + 2) {\n        return;\n      }\n\n      const collection = collections[item.color];\n      if (collection.length === 0) {\n        if (item.value === 0) {\n          handleClickSlot(index);\n          dispatch(moveToCollection({ target: item.color }));\n        }\n      } else {\n        if (collection[collection.length - 1].value + 1 === item.value) {\n          handleClickSlot(index);\n          dispatch(moveToCollection({ target: item.color }));\n        }\n      }\n    });\n  }, [collections, dispatch, handleClickSlot, slots]);\n\n  React.useEffect(() => {\n    if (start) {\n      checkToCollection();\n    }\n  }, [checkToCollection, start]);\n\n  return (\n    <EmptyContainer>\n      {slots.map((slot, index) => (\n        <EmptyCard\n          key={index}\n          onClick={(e) => {\n            handleClickSlot(index);\n            e.stopPropagation();\n          }}\n        >\n          {slot === null ? null : (\n            <Card\n              data={slot}\n              selected={temp.type === \"slot\" && temp.index === index}\n            />\n          )}\n        </EmptyCard>\n      ))}\n    </EmptyContainer>\n  );\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\"\nimport Collection from \"./Collections\"\nimport Slots from \"./Slots\"\nimport { setTime } from './cellsSlice';\n\nconst BarContainer = styled.div`\n  display: flex;\n  margin-top: 4.5rem;\n\n  @media (max-width: 960px) {\n    transform: scale(0.5);\n    margin-top: -2rem;\n  }\n`;\nconst TimeContainer = styled.div`\n  width: 12rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\nconst Time = styled.div`\n  font-size: 24px;\n  font-weight: 600;\n  user-select: none;\n`;\nconst TimeCounter = styled.div`\n  background-color: rgba(0,0,0,0.25);\n  width: 80%;\n  height: 3rem;\n  color: rgba(255,255,255,0.9);\n  font-size: 2.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 1rem;\n  user-select: none;\n`;\n\nexport default function ControlBar() {\n  const time = useSelector(state => state.cells.time);\n  const start = useSelector(state => state.cells.start);\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    if (start) {\n      setTimeout(() => {\n        dispatch(setTime(time + 1));\n      }, 1000);\n    } else {\n    }\n  }, [dispatch, start, time]);\n  return (\n    <BarContainer>\n      <Slots />\n        <TimeContainer>\n          <Time>Time</Time>\n          <TimeCounter>{Math.floor(time / 60)}:{time % 60 < 10 ? '0' + time % 60 : time % 60}</TimeCounter>\n        </TimeContainer>\n      <Collection />\n    </BarContainer>\n  )\n}","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { initColumn, setStatus } from \"./cellsSlice\";\n\nconst EndWrapper = styled.div`\n  flex-grow: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\nconst EndContainer = styled.div`\n  padding: 1.5rem;\n  width: 35rem;\n  background-color: rgba(0, 0, 0, 0.5);\n  border: 2px solid #000;\n  margin: 0.5rem 0;\n  border-radius: 4px;\n  color: white;\n  user-select: none;\n  p {\n    margin: 0;\n  }\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\nconst InfoContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  width: 80%;\n`;\nconst InfoItem = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\nconst NewGameButton = styled.div`\n  width: 80%;\n  height: 3rem;\n  margin-top: 1rem;\n  background-color: #1b7ced;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.75rem;\n  border-radius: 4px;\n`;\nconst MenuButton = styled.div`\n  width: 80%;\n  height: 2rem;\n  margin-top: 1rem;\n  background-color: #e44c51;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.25rem;\n  border-radius: 4px;\n`;\n\nfunction End() {\n  const time = useSelector(state => state.cells.time);\n  const completedPatch = React.useRef(0);\n  const dispatch = useDispatch();\n\n  React.useEffect(() => {\n    completedPatch.current = localStorage.getItem('completePatch')\n  }, []);\n\n  const handleNewGame = () => {\n    dispatch(initColumn());\n    dispatch(setStatus('game'));\n  };\n  const handleBackToMenu = () => {\n    dispatch(initColumn());\n    dispatch(setStatus('index'));\n  };\n  return (\n    <EndWrapper>\n      <EndContainer>\n        <h2 style={{ marginTop: 0 }}>恭喜通关</h2>\n        <InfoContainer>\n          <InfoItem>\n            <p>时间</p>\n            <p>{time}</p>\n          </InfoItem>\n          <InfoItem>\n            <p>已完成场次：</p>\n            <p>{completedPatch.current}</p>\n          </InfoItem>\n        </InfoContainer>\n        <NewGameButton onClick={handleNewGame}>新的游戏</NewGameButton>\n        <MenuButton onClick={handleBackToMenu}>返回菜单</MenuButton>\n      </EndContainer>\n    </EndWrapper>\n  )\n}\n\nexport default End;\n","import styled from \"styled-components\";\n\nconst FloatActionButton = styled.div`\n  position: fixed;\n  right: ${props => props.right};\n  bottom: ${props => props.bottom};\n  left: ${props => props.left};\n  top: ${props => props.top};\n  width: 4rem;\n  height: 4rem;\n  border-radius: 2rem;\n  color: #FFF;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 20;\n  background-color: rgba(0,0,0,0.5);\n  border: 2px solid rgba(0,0,0,0.75);\n  &:hover {\n    background-color: rgba(0,0,0,0.75);\n    cursor: pointer;\n  }\n`;\n\nfunction FAB(props) {\n  return (\n    <FloatActionButton {...props}>{props.children}</FloatActionButton>\n  )\n}\n\nexport default FAB;\n","import Card from \"./Card\";\nimport styled from \"styled-components\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  moveCard,\n  moveToCollection,\n  moveToSlot,\n  selectColumn,\n} from \"./cellsSlice\";\nimport React from \"react\";\n\nconst ColumnWrapper = styled.div`\n  margin: 0 0.75rem;\n  position: relative;\n  align-self: flex-start;\n`;\nconst EmptyCard = styled.div`\n  width: 8rem;\n  height: 10rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  border-radius: 0.5rem;\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.1);\n    cursor: pointer;\n  }\n`;\n\nconst searchMoveableCard = (column) => {\n  const temp = {};\n  const stack = [];\n  const length = column.length;\n  let index = 0;\n  while (true) {\n    if (index >= length) {\n      break;\n    }\n    if (temp.value === undefined) {\n      Object.assign(temp, column[length - 1]);\n      index++;\n    } else {\n      if (\n        column[length - 1 - index].value === temp.value + 1 &&\n        column[length - 1 - index].color % 2 !== temp.color % 2\n      ) {\n        Object.assign(temp, column[length - 1 - index]);\n        index++;\n      } else {\n        break;\n      }\n    }\n    stack.unshift(Object.assign({}, temp));\n  }\n  return stack;\n};\n\nconst tryMoveCard = (stack, column) => {\n  const result = {\n    allowMove: false,\n    length: 0,\n  };\n  if (column.length === 0) {\n    return {\n      allowMove: true,\n      length: stack.length,\n    };\n  }\n  const target = column[column.length - 1];\n  stack.forEach((item, index) => {\n    if (\n      item.color % 2 !== target.color % 2 &&\n      item.value === target.value - 1\n    ) {\n      result.allowMove = true;\n      result.length = stack.length - index;\n    }\n  });\n  return result;\n};\n\nexport default function Column(props) {\n  const dispatch = useDispatch();\n  const selected = useSelector((state) => state.cells.temp);\n  const collections = useSelector((state) => state.cells.collections);\n  const slots = useSelector((state) => state.cells.slots);\n  const columns = useSelector((state) => state.cells.columns);\n  const start = useSelector((state) => state.cells.start);\n  const blockAutoCollection = useSelector(\n    (state) => state.cells.blockAutoCollection\n  );\n  const data = columns[props.index];\n\n  const handleOnClick = React.useCallback(\n    (e) => {\n      if (e) {\n        e.stopPropagation();\n      }\n      const moveInfo = tryMoveCard(selected.stack, data);\n      if (moveInfo.allowMove) {\n        dispatch(moveCard({ target: props.index, length: moveInfo.length }));\n      } else {\n        const stack = searchMoveableCard(data);\n        dispatch(\n          selectColumn({ index: props.index, stack: stack, type: \"column\" })\n        );\n      }\n    },\n    [data, dispatch, props.index, selected.stack]\n  );\n\n  const resetSelected = React.useCallback(() => {\n    dispatch(selectColumn({ index: -1, stack: [] }));\n  }, [dispatch]);\n\n  const shouldBackdropOpen = (index) => {\n    if (selected.type === \"column\") {\n      return (\n        props.index === selected.index &&\n        !data.length - index <= selected.stack.length\n      );\n    } else {\n      return false;\n    }\n  };\n  const checkToCollection = React.useCallback(() => {\n    if (blockAutoCollection) {\n      return;\n    }\n    const data = columns[props.index];\n    if (data.length === 0) {\n      return;\n    } else {\n      const item = data[data.length - 1];\n      const collection = collections[item.color];\n      let min = 13;\n      collections.forEach((item) => {\n        if (item.length === 0) {\n          min = 0;\n        } else if (item[item.length - 1].value < min) {\n          min = item[item.length - 1].value;\n        }\n      });\n      if (item.value >= min + 2) {\n        return;\n      }\n      if (collection.length === 0) {\n        if (item.value === 0) {\n          handleOnClick();\n          dispatch(moveToCollection({ target: item.color }));\n        }\n      } else {\n        if (collection[collection.length - 1].value + 1 === item.value) {\n          handleOnClick();\n          dispatch(moveToCollection({ target: item.color }));\n        }\n      }\n    }\n  }, [\n    blockAutoCollection,\n    collections,\n    columns,\n    dispatch,\n    handleOnClick,\n    props.index,\n  ]);\n  const couldToCollection = () => {\n    const data = columns[props.index];\n    if (data.length === 0) {\n      return false;\n    } else {\n      const item = data[data.length - 1];\n      const collection = collections[item.color];\n      if (collection.length === 0) {\n        if (item.value === 0) {\n          return true;\n        }\n      } else {\n        if (collection[collection.length - 1].value + 1 === item.value) {\n          return true;\n        }\n      }\n      return false;\n    }\n  };\n  const couldToSlot = () => {\n    const data = columns[props.index];\n    if (data.length === 0) {\n      return false;\n    } else {\n      for (let i = 0; i < slots.length; i++) {\n        if (slots[i] === null) {\n          return {\n            allow: true,\n            target: i,\n          };\n        }\n      }\n      return { allow: false };\n    }\n  };\n  const handleMouseUp = (e) => {\n    if (e.button === 2) {\n      const slotsInfo = couldToSlot();\n      if (couldToCollection()) {\n        resetSelected();\n        handleOnClick();\n        dispatch(moveToCollection({ target: data[data.length - 1].color }));\n      } else if (slotsInfo.allow) {\n        resetSelected();\n        handleOnClick();\n        dispatch(moveToSlot({ target: slotsInfo.target }));\n      }\n    }\n  };\n  React.useEffect(() => {\n    if (start) {\n      checkToCollection();\n    }\n  }, [checkToCollection, start]);\n\n  return (\n    <ColumnWrapper onClick={handleOnClick} onMouseUp={handleMouseUp}>\n      {data.length === 0 ? (\n        <EmptyCard />\n      ) : (\n        data.map((card, index) => (\n          <Card\n            key={index}\n            data={card}\n            backdrop={shouldBackdropOpen(index)}\n            last={index === data.length - 1}\n          />\n        ))\n      )}\n      <MoveAbleColumn\n        show={selected.index === props.index && selected.type === \"column\"}\n      />\n    </ColumnWrapper>\n  );\n}\n\nconst MoveAbleColumnWrapper = styled.div`\n  position: absolute;\n  top: ${(props) => props.space * 3}rem;\n  box-shadow: 0px 1px 2px 4px rgba(0, 0, 0, 0.5);\n  border-radius: 0.5rem;\n`;\n\nconst MoveAbleColumn = (props) => {\n  const selected = useSelector((state) => state.cells.temp);\n  const columns = useSelector(state => state.cells.columns);\n  const collections = useSelector(state => state.cells.collections);\n  const slots = useSelector(state => state.cells.slots);\n  const column = columns[selected.index];\n  const data = columns[selected.index];\n  const dispatch = useDispatch();\n\n  const couldToCollection = () => {\n    if (data.length === 0) {\n      return false;\n    } else {\n      const item = data[data.length - 1];\n      const collection = collections[item.color];\n      if (collection.length === 0) {\n        if (item.value === 0) {\n          return true;\n        }\n      } else {\n        if (collection[collection.length - 1].value + 1 === item.value) {\n          return true;\n        }\n      }\n      return false;\n    }\n  };\n  const couldToSlot = () => {\n    if (data.length === 0) {\n      return false;\n    } else {\n      for (let i = 0; i < slots.length; i++) {\n        if (slots[i] === null) {\n          return {\n            allow: true,\n            target: i,\n          };\n        }\n      }\n      return { allow: false };\n    }\n  };\n\n  const handleOnClick = (e) => {\n    e.stopPropagation();\n    const sourceTime = selected.timeStamp || 0;\n    const targetTime = Date.now();\n    if (targetTime - sourceTime < 300) {\n      handleOnDoubleClick();\n    } else {\n      dispatch(selectColumn({ index: -1, stack: [] }));\n    }\n  };\n  const handleOnDoubleClick = () => {\n    console.log('on double click');\n    const slotsInfo = couldToSlot();\n    if (couldToCollection()) {\n      dispatch(moveToCollection({ target: data[data.length - 1].color }));\n    } else if (slotsInfo.allow) {\n      dispatch(moveToSlot({ target: slotsInfo.target }));\n    }\n  };\n  if (!props.show) {\n    return null;\n  } else {\n    return (\n      <MoveAbleColumnWrapper\n        onClick={handleOnClick}\n        space={column.length - selected.stack.length}\n      >\n        {selected.stack.map((item, index) => (\n          <Card\n            key={index}\n            data={item}\n            last={index === selected.stack.length - 1}\n          />\n        ))}\n      </MoveAbleColumnWrapper>\n    );\n  }\n};\n","import React from 'react';\nimport { useSelector } from \"react-redux\";\nimport styled from \"styled-components\"\nimport Column from \"./Column\";\n\nconst ColumnContainer = styled.div`\n  display: flex;\n  margin-top: 2rem;\n\n  @media (max-width: 960px) {\n    transform: scale(0.5);\n    margin-top: -2rem;\n    transform-origin: 50% 0;\n  }\n`;\n\nexport default function GamePanel() {\n  const columns = useSelector(state => state.cells.columns);\n  return (\n    <ColumnContainer>\n    {\n      columns.map((column, index) => <Column key={index} index={index} />)\n    }\n    </ColumnContainer>\n  )\n}","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport styled from 'styled-components';\nimport { setStatus } from './cellsSlice';\n\nconst HelpContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100vw;\n  flex-grow: 1;\n`;\nconst HelpItem = styled.div`\n  padding: 1.5rem;\n  width: 35rem;\n  background-color: rgba(0, 0, 0, 0.5);\n  border: 2px solid #000;\n  margin: 0.5rem 0;\n  border-radius: 4px;\n  color: white;\n  user-select: none;\n  @media(max-width: 960px) {\n    transform: scale(0.5);\n    transform-origin: 50% 10%;\n  }\n  p {\n    margin: 0;\n  }\n`;\n\nfunction Help() {\n  const dispatch = useDispatch();\n  const handleBack = () => {\n    dispatch(setStatus('index'));\n  };\n  return (\n    <HelpContainer onClick={handleBack}>\n      <HelpItem>\n        <h3 style={{ textAlign: 'center' }}>帮助&amp;介绍</h3>\n        <h4>游戏目标</h4>\n        <p>在四个回收单元中各创建一叠牌，每叠 13 张，且花色相同。每叠牌必须按从小 (A) 到大 (K) 的顺序排列。</p>\n        <h4>如何玩牌</h4>\n        <p>空当接龙仅使用一副牌玩，共 52 张，牌的正面朝上，排成八列。通过从这八列中移牌来创建四叠牌：</p>\n        <p>左上角是四个“可用单元”，移牌时可以在其中临时放牌。</p>\n        <p>右上角是四个“回收单元”，在其中构建获胜所需的牌叠。</p>\n        <h4>具体玩法</h4>\n        <p>从每列底部拖牌，并按以下方式移动：</p>\n        <p>从列到可用单元。每个可用单元一次只能放一张牌。</p>\n        <p>从列到列（或从可用单元到列）。在列中必须按降序依次放牌，而且红黑花色交替。</p>\n        <p>从列到回收单元。每叠牌必须由同一花色组成，并从 A 开始。</p>\n        <p>每一列中只能移动最下面的牌，被压住的牌是不能直接移动的。左上的中转单元中的牌都可以移动。</p>\n        <p style={{ textAlign: 'center', marginTop: '2rem' }}>*点击背景任意位置返回菜单*</p>\n      </HelpItem>\n    </HelpContainer>\n  )\n}\n\nexport default Help;","import styled from \"styled-components\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setMessage } from \"./cellsSlice\";\nimport _ from 'lodash';\n\nconst MessageContainer = styled.div`\n  position: fixed;\n  bottom: ${(props) => (props.open ? \"3rem\" : \"-3rem\")};\n  transition: 400ms;\n  left: 0;\n  right: 0;\n  height: 2.5rem;\n  width: 28rem;\n  background-color: rgb(211, 47, 47);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 10;\n  border-radius: 4px;\n  color: white;\n  margin: 0 auto;\n  box-shadow: 0px 3px 5px -1px rgb(0 0 0 / 20%),\n    0px 6px 10px 0px rgb(0 0 0 / 14%), 0px 1px 18px 0px rgb(0 0 0 / 12%);\n`;\n\nfunction Message() {\n  const message = useSelector((state) => state.cells.message);\n  const timeout = React.useRef(null);\n  const timestamp = React.useRef(null);\n  const dispatch = useDispatch();\n\n  const handleCloseMessage = React.useCallback(() => {\n    dispatch(setMessage({ open: false }));\n  }, [dispatch]);\n  React.useEffect(() => {\n    if (timeout.current !== null) {\n      clearTimeout(timeout.current);\n    }\n    if (message.open || message.message_id !== timestamp.current) {\n      timeout.current = setTimeout(() => {\n        handleCloseMessage();\n      }, 2000);\n      timestamp.current = message.message_id;\n    }\n  }, [handleCloseMessage, message.message_id, message.open]);\n  return (\n    <MessageContainer open={message.open}>\n      <b style={{ userSelect: \"none\" }}>\n        {message.text}\n      </b>\n    </MessageContainer>\n  );\n}\n\nexport default Message;\n","import { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { initColumn, setStatus } from \"./cellsSlice\";\n\nconst WelcomeContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex-grow: 1;\n`;\nconst WelcomeItem = styled.div`\n  width: 25rem;\n  height: 3rem;\n  background-color: rgba(0, 0, 0, 0.5);\n  border: 2px solid #000;\n  margin: 0.5rem 0;\n  border-radius: 4px;\n  color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  user-select: none;\n  opacity: ${(props) => (props.disable ? 0.5 : 1)};\n  ${(props) =>\n    props.disable\n      ? \"cursor: not-allowed;\"\n      : `\n    &:hover {\n      background-color: rgba(0, 0, 0, 0.75);\n      cursor: pointer;\n    }\n  `}\n`;\n\nfunction Welcome() {\n  const dispatch = useDispatch();\n  const status = useSelector((state) => state.cells.status);\n  const history = useHistory();\n\n  const handleNewGame = () => {\n    dispatch(setStatus(\"game\"));\n    dispatch(initColumn());\n  };\n  const handleHelp = () => {\n    dispatch(setStatus(\"help\"));\n  };\n  const handleResume = () => {\n    dispatch(setStatus(\"game\"));\n  };\n  const handleExit = () => {\n    history.push('/');\n  };\n  return (\n    <WelcomeContainer>\n      <WelcomeItem\n        onClick={handleResume}\n        style={{ display: status === \"pause\" ? \"static\" : \"none\" }}\n      >\n        继续游戏\n      </WelcomeItem>\n      <WelcomeItem onClick={handleNewGame}>新的游戏</WelcomeItem>\n      <WelcomeItem onClick={handleHelp}>游戏帮助</WelcomeItem>\n      <WelcomeItem onClick={handleExit}>退出游戏</WelcomeItem>\n    </WelcomeContainer>\n  );\n}\n\nexport default Welcome;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { cancelAction, initColumn, pushIntoHistory, selectColumn, setStatus } from \"./cellsSlice\";\nimport ControlBar from \"./ControlBar\";\nimport End from \"./End\";\nimport FAB from \"./FAB\";\nimport GamePanel from \"./GamePanel\";\nimport Help from \"./Help\";\nimport Message from \"./Message\";\nimport Welcome from './Welcome';\n\nconst Background = styled.div`\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n  background-color: green;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nfunction Cells() {\n  const dispatch = useDispatch();\n  const status = useSelector((state) => state.cells.status);\n  const history = useSelector((state) => state.cells.history);\n  const state = useSelector((state) => state.cells);\n  const shortcut = React.useRef(new Map());\n  const handleCancelSelected = (e) => {\n    dispatch(selectColumn({ index: -1, stack: [] }));\n  };\n  const handleCancelAction = (e) => {\n    e.stopPropagation();\n    if (history.length > 1) {\n      dispatch(cancelAction(history[history.length - 2]));\n    }\n  };\n  const handlePause = () => {\n    dispatch(setStatus('pause'));\n  };\n\n  React.useEffect(() => {\n    dispatch(initColumn());\n  }, [dispatch]);\n  React.useEffect(() => {\n    dispatch(pushIntoHistory({\n      columns: state.columns,\n      slots: state.slots,\n      collections: state.collections,\n    }));\n  }, [state.columns, state.slots, state.collections, dispatch]);\n  React.useEffect(() => {\n    document.onkeydown = (e) => {\n      shortcut.current.set(e.code, true);\n      if (shortcut.current.get('ControlLeft') && shortcut.current.get('KeyZ')) {\n        handleCancelAction(e);\n      }\n    };\n    document.onkeyup = (e) => {\n      shortcut.current.set(e.code, false);\n    };\n    return () => {\n      document.onkeydown = () => {};\n      document.onkeyup = () => {};\n    };\n  })\n\n  let content;\n  if (status === \"index\") {\n    content = <Welcome />;\n  } else if (status === \"game\") {\n    content = (\n      <>\n        <ControlBar />\n        <GamePanel />\n        <Message />\n        <FAB right='1rem' bottom='1rem' onClick={handleCancelAction}>撤销</FAB>\n        <FAB left='1rem' bottom='1rem' onClick={handlePause}>菜单</FAB>\n      </>\n    );\n  } else if (status === \"help\") {\n    content = (<Help />);\n  } else if (status === \"end\") {\n    content = (<End />);\n  } else if (status === 'pause') {\n    content = (<Welcome />);\n  }\n  return (\n    <Background onClick={handleCancelSelected} onContextMenu={e => e.preventDefault()}>\n      {content}\n    </Background>\n  );\n}\n\nexport default Cells;\n","import styled from \"styled-components\";\n\nconst HeaderContainer = styled.div`\n  background: rgba(0,0,0, 0.5);\n  height: 4rem;\n  left: 0;\n  right: 0;\n  position: absolute;\n  z-index: 10;\n  color: #FFF;\n  display: flex;\n  align-items: center;\n  @media (max-width: 960px) {\n    display: none;\n  }\n`;\nconst Title = styled.div`\n  font-size: 2rem;\n  font-family: '微软雅黑';\n  padding-left: 1rem;\n  user-select: none;\n`;\nconst MenuButton = styled.div`\n  width: 3rem;\n  height: 2rem;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  margin-left: 1rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1rem;\n  user-select: none;\n  border-radius: 4px;\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.5);\n    color: black;\n    cursor: pointer;\n  }\n`;\n\nfunction Header() {\n  return (\n    <HeaderContainer>\n      <MenuButton>Menu</MenuButton>\n      <Title>空当接龙</Title>\n    </HeaderContainer>\n  )\n}\n\nexport default Header;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Row = styled.div`\n  display: flex;\n`;\nconst Block = styled.div`\n  width: 4rem;\n  height: 4rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid black;\n`;\nconst Wall = styled(Block)`\n  background-color: gray;\n`;\nconst Road = styled(Block)``;\n\nfunction MapBlock({ type }) {\n  if (type === 0) {\n    return <Wall />;\n  }\n  if (type === 1) {\n    return <Road />;\n  }\n  return null;\n}\n\nfunction Battleland(props) {\n  const { handleSetDomForMap } = props;\n  if (!props.gameMap) return null;\n  return (\n    <>\n      {props.gameMap.map((row, rowIndex) => (\n        <Row key={rowIndex}>\n          {row.map((item, itemIndex) => (\n            <div key={itemIndex} ref={(ref) => handleSetDomForMap(rowIndex, itemIndex, ref)}>\n              <MapBlock type={item.type} />\n            </div>\n          ))}\n        </Row>\n      ))}\n    </>\n  );\n}\nexport default Battleland;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst MonsterContainer = styled.div`\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n  border: 2px solid black;\n  position: absolute;\n  top: ${(props) => props.top}px;\n  left: ${(props) => props.left}px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\nconst Blank = styled.div`\n  flex-grow: ${props => props.maxHp - props.hp};\n  background-color: #FFF;\n`;\nconst Hp = styled.div`\n  flex-grow: ${props => props.hp};\n  background-color: red;\n`;\n\nfunction Monster(props) {\n  const { roadMap, gameMap, monsters, hp, maxHp, speed, removeMonster, monsterId } = props;\n  const [step, setStep] = React.useState(0);\n  const [coordinate, setCoordinate] = React.useState({ top: 0, left: 0 });\n  const monsterRef = React.useRef();\n  const timeoutRef = React.useRef(null);\n\n  React.useEffect(() => {\n    try {\n      const { x, y } = roadMap[step];\n      const dom = gameMap[y][x].dom;\n      const monsterDom = monsterRef.current;\n      const top =\n        dom.offsetTop + dom.offsetHeight / 2 - monsterDom.offsetHeight / 2;\n      const left =\n        dom.offsetLeft + dom.offsetWidth / 2 - monsterDom.offsetWidth / 2;\n      if (step !== 0) {\n        monsterDom.style.transition = `all ${ 4000 / speed }ms linear`;\n        setCoordinate({ top, left });\n        if (step + 1 < roadMap.length) {\n          if (timeoutRef.current === null) {\n            timeoutRef.current = setTimeout(() => {\n              timeoutRef.current = null;\n              setStep(step + 1);\n            }, 4000 / speed);\n          }\n        }\n      } else {\n        setCoordinate({ top, left });\n        setTimeout(() => {\n          setStep(1);\n        }, 800);\n      }\n    } catch (e) {}\n  }, [gameMap, hp, roadMap, speed, step]);\n\n  React.useLayoutEffect(() => {\n    if (hp === 0) {\n      clearTimeout(timeoutRef.current);\n      removeMonster(monsterId);\n    }\n  }, [hp, monsterId, removeMonster]);\n\n  React.useEffect(() => {\n    monsters.push({ dom: monsterRef.current, id: monsterId });\n  }, [monsterId, monsterRef, monsters]);\n\n  return (\n    <MonsterContainer\n      ref={monsterRef}\n      top={coordinate.top}\n      left={coordinate.left}\n      {...props}\n    >\n      <Blank hp={hp} maxHp={maxHp} />\n      <Hp hp={hp} />\n    </MonsterContainer>\n  );\n}\n\nexport default Monster;\n","import Monster from \"./monster\";\n\nfunction Monsters(props) {\n  const { gameMap, defaultRoadmap, monsters, monstersModel, removeMonster } = props;\n  return (\n    <>\n      {monstersModel.map((monster, index) => (\n        <Monster\n          key={monster.id}\n          roadMap={defaultRoadmap}\n          gameMap={gameMap}\n          monsters={monsters}\n          monsterId={monster.id}\n          hp={monster.hp}\n          maxHp={monster.maxHp}\n          speed={index + 1}\n          removeMonster={removeMonster}\n        />\n      ))}\n    </>\n  );\n}\n\nexport default Monsters;\n","export const TOWER_TYPE = {\n  'normal': {\n    attack_range: 200,\n    name: '普通防御塔',\n    attack_point: 1,\n  }\n}","import React from \"react\";\nimport styled from \"styled-components\";\nimport { TOWER_TYPE } from \"./constant\";\n\nconst TowerNode = styled.div`\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n  border: 2px solid blue;\n  background-color: skyblue;\n  position: absolute;\n  top: ${(props) => props.top}px;\n  left: ${(props) => props.left}px;\n  z-index: 10;\n`;\n\nconst Bullet = styled.div`\n  width: 8px;\n  height: 8px;\n  border-radius: 4px;\n  background-color: green;\n`;\n\nfunction Tower(props) {\n  const {\n    towers,\n    gameMap,\n    coordinate,\n    setCenterNode,\n    type,\n    monsters,\n    requestFire,\n  } = props;\n  const towerId = React.useRef(Date.now());\n  const CD = React.useRef(true);\n  const cooldownTime = 100;\n  const [towerCoordinate, setTowerCoordinate] = React.useState({\n    top: 0,\n    left: 0,\n  });\n  const towerRef = React.useRef();\n\n  const handlePushToTowers = (ref) => {\n    let shouldPush = true;\n    towerRef.current = ref;\n    towers.forEach((item) => {\n      if (item.id === towerId.current) {\n        shouldPush = false;\n      }\n    });\n    if (shouldPush) {\n      towers.push({ dom: ref, id: towerId.current });\n    }\n  };\n\n  const handleShouldAttack = React.useCallback(() => {\n    const coordinate_tower = {\n      x: towerRef.current.offsetLeft + towerRef.current.offsetWidth / 2,\n      y: towerRef.current.offsetTop + towerRef.current.offsetHeight / 2,\n    };\n    monsters.forEach((monster) => {\n      const coordinate_monster = {\n        x: monster.dom.offsetLeft + monster.dom.offsetWidth / 2,\n        y: monster.dom.offsetTop + monster.dom.offsetHeight / 2,\n      };\n\n      if (CD.current) {\n        if (\n          (coordinate_tower.x - coordinate_monster.x) ** 2 +\n            (coordinate_tower.y - coordinate_monster.y) ** 2 <\n          (TOWER_TYPE[type].attack_range + monster.dom.offsetHeight / 2) ** 2\n        ) {\n          const A = coordinate_tower, B = coordinate_monster;\n          const target = {x: 0, y: 0};\n          const radius = 300;\n          target.y = (radius * (B.y - A.y)) / ((B.x - A.x) ** 2 + (B.y - A.y) ** 2) ** 0.5 + A.y;\n          target.x = (B.x - A.x) * (target.y - A.y) / (B.y - A.y) + A.x;\n          requestFire({ source: coordinate_tower, target, component: <Bullet /> });\n          CD.current = false;\n          setTimeout(() => (CD.current = true), cooldownTime);\n        }\n      }\n    });\n  }, [monsters, requestFire, type]);\n\n  React.useEffect(() => {\n    try {\n      const { x, y } = coordinate;\n      const dom = gameMap[y][x].dom;\n      const tower = towerRef.current;\n      setTowerCoordinate({\n        top: dom.offsetTop + dom.offsetHeight / 2 - tower.offsetHeight / 2,\n        left: dom.offsetLeft + dom.offsetWidth / 2 - tower.offsetWidth / 2,\n      });\n    } catch (e) {}\n  }, [coordinate, gameMap]);\n  React.useEffect(() => {\n    const timeout = setInterval(handleShouldAttack, 1000 / 30);\n    return () => {\n      clearInterval(timeout);\n    };\n  }, [handleShouldAttack]);\n  return (\n    <TowerNode\n      top={towerCoordinate.top}\n      left={towerCoordinate.left}\n      ref={handlePushToTowers}\n      onMouseEnter={() => setCenterNode({ dom: towerRef.current, type })}\n      onMouseLeave={() => setCenterNode(null)}\n      {...props}\n    />\n  );\n}\n\nexport default Tower;\n","import Tower from \"./tower\";\n\nfunction Towers({ towers, gameMap, towersModel, setCenterNode, monsters, requestFire }) {\n  return (\n    <div>\n      {towersModel.map((tower) => (\n        <Tower\n          key={tower.id}\n          towers={towers}\n          monsters={monsters}\n          type={tower.type}\n          requestFire={requestFire}\n          gameMap={gameMap}\n          setCenterNode={setCenterNode}\n          coordinate={tower.coordinate}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default Towers;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { TOWER_TYPE } from \"./constant\";\n\nconst StyledAttackRange = styled.div`\n  width: ${(props) => props.radius * 2}px;\n  height: ${(props) => props.radius * 2}px;\n  border-radius: 50%;\n  position: absolute;\n  background-color: rgba(135, 205, 235, 0.25);\n  top: ${props => props.top}px;\n  left: ${props => props.left}px;\n`;\n\nfunction AttackRange(props) {\n  const { centerNode } = props;\n  const [coordinate, setCoordinate] = React.useState({ top: 0, left: 0 });\n  const attackRangeRef = React.useRef();\n  React.useEffect(() => {\n    try {\n      const { dom } = centerNode;\n      const current = attackRangeRef.current;\n      const top = dom.offsetTop + dom.offsetHeight / 2 - current.offsetHeight / 2;\n      const left = dom.offsetLeft + dom.offsetWidth / 2 - current.offsetWidth / 2;\n      setCoordinate({ top, left });\n    } catch (e) {}\n  }, [centerNode]);\n  if (centerNode === null) {\n    return null;\n  }\n  return (\n    <StyledAttackRange\n      top={coordinate.top}\n      left={coordinate.left}\n      ref={attackRangeRef}\n      radius={\n        TOWER_TYPE[centerNode.type]\n          ? TOWER_TYPE[centerNode.type].attack_range\n          : 0\n      }\n    />\n  );\n}\n\nexport default AttackRange;\n","function initCanvas(canvas, bulletsModel, monsters, towerAttack) {\n  canvas.style.position = 'absolute';\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n  canvas.style.zIndex = 5;\n\n  const ctx = canvas.getContext('2d');\n  \n  return setInterval(() => Frame(ctx, bulletsModel, monsters, towerAttack), 1000 / 60);\n}\nfunction Frame(ctx, bulletsModel, monsters, towerAttack) {\n  ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);\n  bulletsModel.forEach((bullet, index) => {\n    if (bullet.process === 100) {\n      bulletsModel.splice(index, 1);\n    } else {\n      new NormalBullet(bullet, monsters, towerAttack).draw(ctx);\n    }\n  });\n}\n\nfunction OpacityFunc(process) {\n  if (process / 100 < 0.75) {\n    return 1;\n  } else {\n    return 1 - (process / 100 - 0.75) * 4; \n  }\n}\n\nfunction NormalBullet(bullet, monsters, towerAttack) {\n  this.sourceCoordinate = bullet.source;\n  this.targetCoordinate = bullet.target;\n  bullet.process = bullet.process !== undefined ? bullet.process + 1.5 : 0;\n  this.coordinate = {\n    x: ((this.targetCoordinate.x - this.sourceCoordinate.x) * bullet.process) / 100 + this.sourceCoordinate.x,\n    y: ((this.targetCoordinate.y - this.sourceCoordinate.y) * bullet.process) / 100 + this.sourceCoordinate.y,\n  }\n  let monsterId;\n  const attack = !monsters.current.every(monster => {\n    const monster_coordinate = {\n      x: monster.dom.offsetLeft + monster.dom.offsetWidth / 2,\n      y: monster.dom.offsetTop + monster.dom.offsetHeight / 2,\n    }\n    const distance = monster.dom.offsetWidth / 2;\n    monsterId = monster.id;\n    return (monster_coordinate.x - this.coordinate.x) ** 2 + (monster_coordinate.y - this.coordinate.y) ** 2 > distance ** 2;\n  })\n  if (attack) {\n    towerAttack(monsterId);\n    bullet.process = 100;\n  }\n  if (bullet.process > 100) {\n    bullet.process = 100;\n  }\n  this.draw = (ctx) => {\n    ctx.beginPath();\n    ctx.fillStyle = `rgba(0, 255, 0, ${OpacityFunc(bullet.process)})`;\n    ctx.arc(this.coordinate.x, this.coordinate.y, 5, 0, Math.PI * 2, false);\n    ctx.strokeStyle = `rgba(0, 0, 0, ${OpacityFunc(bullet.process)})`;\n    ctx.fill();\n    ctx.stroke();\n  }\n}\n\nexport default initCanvas;","import React from \"react\";\nimport initCanvas from \"./initCanvas\";\n\nfunction Bullets({ bulletsModel, monsters, towerAttack }) {\n  React.useEffect(() => {\n    const interval = initCanvas(canvasRef.current, bulletsModel, monsters, towerAttack );\n    return () => {\n      clearInterval(interval);\n    }\n  }, [bulletsModel, monsters, towerAttack]);\n  const canvasRef = React.useRef();\n  return (\n    <canvas ref={canvasRef}></canvas>\n  );\n}\n\nexport default Bullets;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Battleland from \"./battleland\";\nimport Monsters from \"./monsters\";\nimport Towers from \"./towers\";\nimport AttackRange from \"./attack-range\";\nimport Bullets from \"./bullets\";\n\nconst GameContainer = styled.div`\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst initMap = () => {\n  const map = [];\n  for (let i = 0; i < 3; i++) {\n    const row = [];\n    for (let j = 0; j < 9; j++) {\n      row.push({ type: i % 2 === 0 ? 0 : 1 });\n    }\n    map.push(row);\n  }\n  return map;\n};\nconst initRoadMap = () => {\n  const roadmap = [];\n  for (let i = 0; i < 9; i++) {\n    roadmap.push({ x: i, y: 1 });\n  }\n  return roadmap;\n};\n\nfunction TowerDefense() {\n  const [DemoMap, setDemoMap] = React.useState([]);\n  // 防御塔实例\n  const towers = React.useRef([]);\n  // 防御塔模型\n  const [towersModel, setTowersModel] = React.useState([\n    { type: \"normal\", coordinate: { x: 2, y: 0 }, id: 0 },\n  ]);\n  // 怪物实例\n  const monsters = React.useRef([]);\n  // 怪物模型\n  const [monstersModel, setMonstersModel] = React.useState([\n    { type: \"normal\", id: 0, hp: 10, maxHp: 10, },\n    { type: \"normal\", id: 1, hp: 10, maxHp: 20, },\n    { type: \"normal\", id: 2, hp: 10, maxHp: 10, },\n  ]);\n  // 默认怪物行进路线\n  const defaultRoadmap = initRoadMap();\n  const handleNewGame = () => {\n    setDemoMap(initMap());\n  };\n  // 当前指向的节点\n  const [centerNode, setCenterNode] = React.useState(null);\n  // 子弹模型\n  const bulletsModel = React.useRef([]).current;\n  // 把地图方块的DOM存储到index.js的state中\n  const handleSetDomForMap = (row, col, dom) => {\n    const newDemoMap = [...DemoMap];\n    if (newDemoMap[row][col].dom) {\n      return;\n    } else {\n      newDemoMap[row][col].dom = dom;\n      setDemoMap(newDemoMap);\n    }\n  };\n  // 子弹key\n  const bulletKey = React.useRef(0);\n  // 请求开火\n  const requestFire = (bullet) => {\n    bulletsModel.push({ ...bullet, key: bulletKey.current++ });\n    if (bulletKey.current > 99999999) {\n      bulletKey.current = 0;\n    }\n  };\n  // 清理子弹\n  const cleanBullet = (key) => {\n    const newBulletsModel = [...bulletsModel];\n    let index = null;\n    newBulletsModel.every((bullet, i) => {\n      if (bullet.key === key) {\n        index = i;\n        return false;\n      }\n      return true;\n    });\n    if (index === null) {\n      return;\n    } else {\n      bulletsModel.splice(index, 1);\n    }\n  };\n  const towerAttack = (monsterId) => {\n    const newMonstersModel = [...monstersModel];\n    newMonstersModel.forEach((monster) => {\n      if (monster.id === monsterId) {\n        --monster.hp;\n      }\n    });\n    setMonstersModel(newMonstersModel);\n  };\n  const removeMonster = (monsterId) => {\n    const newMonstersModel = [...monstersModel];\n    let deleteIndex = null;\n    newMonstersModel.forEach((monster, index) => {\n      if (monster.id === monsterId) {\n        deleteIndex = index;\n      }\n      return false;\n    });\n    if (deleteIndex !== null) {\n      newMonstersModel.splice(deleteIndex, 1);\n      setMonstersModel(newMonstersModel);\n    }\n  };\n  React.useEffect(() => {\n    handleNewGame();\n  }, []);\n  return (\n    <GameContainer>\n      <Battleland gameMap={DemoMap} handleSetDomForMap={handleSetDomForMap} />\n      <Monsters\n        monsters={monsters.current}\n        removeMonster={removeMonster}\n        gameMap={DemoMap}\n        defaultRoadmap={defaultRoadmap}\n        monstersModel={monstersModel}\n      />\n      <Towers\n        towers={towers.current}\n        monsters={monsters.current}\n        towersModel={towersModel}\n        gameMap={DemoMap}\n        requestFire={requestFire}\n        setCenterNode={setCenterNode}\n      />\n      <Bullets\n        bulletsModel={bulletsModel}\n        cleanBullet={cleanBullet}\n        towerAttack={towerAttack}\n        monsters={monsters}\n      />\n      <AttackRange centerNode={centerNode} />\n    </GameContainer>\n  );\n}\n\nexport default TowerDefense;\n","import React from \"react\"\n\nfunction Canvas(props) {\n  const { width = window.innerWidth, height = window.innerHeight } = props;\n  return (\n    <div>\n      {React.Children.map(props.children, child => (\n        React.cloneElement(child, {\n          width: width,\n          height: height,\n        })\n      ))}\n    </div>\n  )\n}\n\nexport default Canvas;","import React from \"react\";\n\nfunction Layer(props) {\n  const {\n    width,\n    height,\n    clear = true,\n    fps = 0,\n    updateStackForLayer = null,\n    renderOnMount = true,\n  } = props;\n  // 获取canvas实例\n  const canvasRef = React.useRef();\n  // 每帧需要绘制的图形\n  const shapes = React.useRef([]);\n  // 每帧的id，避免一帧里产生多个重复的渲染函数\n  const frameKey = React.useRef(0);\n  const [ctx, setCtx] = React.useState(null);\n\n  React.useEffect(() => {\n    if (ctx === null) return;\n    const renderer = () => {\n      if (clear) {\n        ctx.clearRect(0, 0, width, height);\n      }\n      if (updateStackForLayer) {\n        // 循环注册的更新函数\n        for (let updater of updateStackForLayer.current) {\n          // 如果当前的更新帧是更新函数注册时指定的间隔帧的整数倍\n          if (frameKey.current % updater.frames === 0) {\n            updater.func();\n          }\n        }\n      }\n      for (let shape of shapes.current) {\n        shape.render(ctx);\n      }\n      frameKey.current++;\n    };\n    const interval = fps === 0 ? null : setInterval(renderer, 1000 / fps);\n    renderOnMount && renderer();\n    return () => {\n      clearInterval(interval);\n    };\n  }, [clear, ctx, fps, height, renderOnMount, updateStackForLayer, width]);\n  React.useEffect(() => {\n    setCtx(canvasRef.current.getContext(\"2d\"));\n  }, []);\n  return (\n    <>\n      <canvas ref={canvasRef} width={width} height={height} style={{ position: 'absolute' }}></canvas>\n      {React.Children.map(props.children, (child) =>\n        React.cloneElement(child, {\n          shapes: shapes.current,\n          ctx,\n          frameKey: frameKey.current,\n        })\n      )}\n    </>\n  );\n}\n\nexport default Layer;\n","import React from \"react\";\n\nfunction Shape(props) {\n  const { render, shapes, frameKey } = props;\n  const lastFrameKey = React.useRef(null);\n  const shapeId = React.useRef(Symbol(\"shape\"));\n  React.useEffect(() => {\n    const shape_id = shapeId.current;\n    shapes.push({ render, shapeId: shapeId.current });\n    lastFrameKey.current = frameKey;\n    return () => {\n      for (let i in shapes) {\n        const shape = shapes[i];\n        if (shape.shapeId === shape_id) {\n          shapes.splice(i, 1);\n        }\n      }\n    };\n  }, [frameKey, render, shapes]);\n  return null;\n}\n\nexport default Shape;\n","export default function handleGetData(prop, data) {\n  if (!prop) return undefined;\n  if (typeof prop === 'function') {\n    return prop(data ? data.current : null);\n  } else {\n    return !!prop.current ? prop.current : prop;\n  }\n}","import React from \"react\";\nimport { Shape } from \".\";\nimport handleGetData from \"./util/handleGetData\";\n\nfunction Rect(props) {\n  const {\n    shapes,\n    frameKey,\n    coordinate,\n    size,\n    color,\n    type = \"fill\",\n    lineWidth = 1,\n  } = props;\n  const render = React.useCallback(\n    (ctx) => {\n      // 使组件能同时处理ref和普通对象\n      const Coordinate = handleGetData(coordinate);\n      const Size = handleGetData(size);\n      const Color = handleGetData(color);\n      const { x, y } = Coordinate;\n      let Width, Height;\n      if (typeof Size === \"number\") {\n        Width = Size;\n        Height = Size;\n      } else if (typeof Size === \"object\") {\n        const { width, height } = Size;\n        Width = width;\n        Height = height;\n      }\n      if (!ctx) return;\n      if (type === \"fill\") {\n        ctx.fillStyle = Color;\n        ctx.fillRect(x, y, Width, Height);\n        ctx.fillStyle = \"#000000\";\n      } else if (type === \"stroke\") {\n        ctx.strokeStyle = Color;\n        ctx.lineWidth = lineWidth;\n        ctx.strokeRect(x, y, Width, Height);\n        ctx.lineWidth = 1;\n      } else if (type === \"clear\") {\n        ctx.clearRect(x, y, Width, Height);\n      }\n    },\n    [coordinate, size, type, color, lineWidth]\n  );\n  return <Shape frameKey={frameKey} render={render} shapes={shapes} />;\n}\n\nexport default Rect;\n","import React from \"react\";\n\nfunction Group(props) {\n  const { shapes, ctx, frameKey } = props;\n  return React.Children.map(props.children, child => (\n    React.cloneElement(child, {\n      shapes: shapes,\n      ctx,\n      frameKey: frameKey,\n    })\n  ));\n}\n\nexport default Group;","import React from \"react\";\n\nconst useData = () => {\n  // 每帧需要执行的函数数组\n  const shouldExecPerFrameRef = React.useRef([]);\n  // 参数 index 表示该函数在更新队列中的位置，用法可以参考css里的zIndex属性\n  const registUpdateFunc = ({ func, frames = 1, index = 0 }) => {\n    const key = Symbol(\"updateFunc\");\n    if (shouldExecPerFrameRef.current.length === 0) {\n      shouldExecPerFrameRef.current.push({\n        key,\n        func,\n        frames,\n        index,\n      });\n    } else {\n      let insertTo = 0;\n      shouldExecPerFrameRef.current.every((item, i) => {\n        if (item.index <= index) {\n          insertTo = i;\n          return false;\n        } else if (i === shouldExecPerFrameRef.current.length - 1) {\n          insertTo = i;\n        }\n        return true;\n      });\n      shouldExecPerFrameRef.current.splice(insertTo, 0, {\n        key,\n        func,\n        frames,\n        index,\n      })\n    }\n    return key;\n  };\n  const removeUpdateFunc = (key) => {\n    shouldExecPerFrameRef.current.every((obj, index) => {\n      if (obj.key === key) {\n        shouldExecPerFrameRef.current.splice(index, 1);\n        return false;\n      } else {\n        return true;\n      }\n    });\n  };\n  const updateStackForLayer = shouldExecPerFrameRef;\n  return {\n    registUpdateFunc,\n    removeUpdateFunc,\n    updateStackForLayer,\n  };\n};\n\nexport default useData;\n","import React from \"react\";\nimport { Shape } from \".\";\nimport handleGetData from \"./util/handleGetData\";\n\nfunction Text(props) {\n  const {\n    shapes,\n    frameKey,\n    coordinate,\n    font = \"16px YaHei\",\n    text = \"\",\n    align = \"\",\n    width = undefined,\n    data,\n  } = props;\n  const render = React.useCallback(\n    (ctx) => {\n      if (text === '') return;\n      // 使组件能同时处理ref和普通对象\n      const Coordinate = handleGetData(coordinate, data);\n      ctx.font = handleGetData(font, data);\n      ctx.textAlign = handleGetData(align, data);\n      ctx.fillText(handleGetData(text, data), Coordinate.x, Coordinate.y, width);\n      ctx.textAlign = null;\n      ctx.font = null;\n    },\n    [align, coordinate, data, font, text, width]\n  );\n  return <Shape frameKey={frameKey} render={render} shapes={shapes} />;\n}\n\nexport default Text;\n","const intervalArray = [];\n\nlet interval = null;\n\nconst AddInterval = (func) => {\n  intervalArray.push(func);\n  if (interval === null) {\n    StartInterval();\n  }\n};\n\nconst StartInterval = () => {\n  if (interval !== null) {\n    clearInterval(interval);\n  }\n  interval = setInterval(() => {\n    for (const func of intervalArray) {\n      func();\n    }\n  }, 1000 / 60);\n};\n\nconst ClearInterval = () => {\n  clearInterval(interval);\n};\n\nexport { AddInterval, StartInterval, ClearInterval };\n","import React from \"react\";\nimport { Group, Rect } from \"../../../lib/canvas-in-react\";\nimport { AddInterval } from \"./gameitem-interval\";\n\nfunction GameItem(props) {\n  const { row, column, data, coordinate = null, preview = false } = props;\n  const x = coordinate\n      ? coordinate.x\n      : window.innerWidth / 2 - 150 + column * 30 + 2,\n    y = coordinate ? coordinate.y : window.innerHeight / 2 + row * 30 - 300 + 2;\n\n  const colorRef = React.useRef(\"\");\n\n  React.useEffect(() => {\n    AddInterval(() => {\n      let opacity = 0.15;\n      const Column = preview ? column + 3 : column;\n      const Row = preview ? row - 3 : row;\n      if (data.gameModel.current[column][row].value === 1) {\n        opacity = 0.5;\n      } else {\n        data.fallingBlock.current.shape.forEach((item) => {\n          if (item.row === Row && item.column === Column) {\n            opacity = 0.5;\n          }\n        });\n      }\n      colorRef.current = `rgba(0, 0, 0, ${opacity})`;\n    });\n  }, [column, data.fallingBlock, data.gameModel, preview, row]);\n  return (\n    <Group {...props}>\n      <Rect type=\"stroke\" lineWidth={0.5} coordinate={{ x, y }} size={26} />\n      <Rect\n        type=\"fill\"\n        color={colorRef}\n        lineWidth={0.5}\n        coordinate={{ x, y }}\n        size={26}\n      />\n    </Group>\n  );\n}\n\nexport default GameItem;\n","\nconst initFallingBlock = (() => {\n  const map = new Map();\n  const I = [\n    { row: 0, column: 3 },\n    { row: 0, column: 4 },\n    { row: 0, column: 5 },\n    { row: 0, column: 6 },\n  ];\n  map.set(\"I\", I);\n\n  const O = [\n    { row: 0, column: 4 },\n    { row: -1, column: 4 },\n    { row: 0, column: 5 },\n    { row: -1, column: 5 },\n  ];\n  map.set(\"O\", O);\n\n  const J = [\n    { row: 0, column: 3 },\n    { row: 0, column: 4 },\n    { row: 0, column: 5 },\n    { row: -1, column: 3 },\n  ];\n  map.set(\"J\", J);\n\n  const L = [\n    { row: 0, column: 3 },\n    { row: 0, column: 4 },\n    { row: 0, column: 5 },\n    { row: -1, column: 5 },\n  ]\n  map.set(\"L\", L);\n\n  const S = [\n    { row: 0, column: 3 },\n    { row: 0, column: 4 },\n    { row: -1, column: 4 },\n    { row: -1, column: 5 },\n  ];\n  map.set(\"S\", S);\n\n  const T = [\n    { row: 0, column: 3 },\n    { row: 0, column: 4 },\n    { row: 0, column: 5 },\n    { row: -1, column: 4 },\n  ];\n  map.set(\"T\", T);\n\n  const Z = [\n    { row: 0, column: 4 },\n    { row: 0, column: 5 },\n    { row: -1, column: 3 },\n    { row: -1, column: 4 },\n  ];\n  map.set(\"Z\", Z);\n\n\n  return (key = \"I\") => ({\n    shape: JSON.parse(JSON.stringify(map.get(key))),\n    offset: { row: 0, col: 0 },\n    key,\n  });\n})();\nconst initTransform = (() => {\n  const map = new Map();\n  const I = [\n    [\n      { row: 0, column: 3 },\n      { row: 0, column: 4 },\n      { row: 0, column: 5 },\n      { row: 0, column: 6 },\n    ],\n    [\n      { row: 0, column: 4 },\n      { row: -1, column: 4 },\n      { row: -2, column: 4 },\n      { row: -3, column: 4 },\n    ],\n  ];\n  map.set(\"I\", I);\n\n  const O = [\n    [\n      { row: 0, column: 4 },\n      { row: -1, column: 4 },\n      { row: 0, column: 5 },\n      { row: -1, column: 5 },\n    ]\n  ];\n  map.set(\"O\", O);\n\n  const J = [\n    [\n      { row: 0, column: 3 },\n      { row: 0, column: 4 },\n      { row: 0, column: 5 },\n      { row: -1, column: 3 },\n    ],\n    [\n      { row: 0, column: 4 },\n      { row: -1, column: 4 },\n      { row: -2, column: 4 },\n      { row: -2, column: 5 },\n    ],\n    [\n      { row: -1, column: 3 },\n      { row: -1, column: 4 },\n      { row: -1, column: 5 },\n      { row: 0, column: 5 },\n    ],\n    [\n      { row: 0, column: 5 },\n      { row: -1, column: 5 },\n      { row: -2, column: 5 },\n      { row: 0, column: 4 },\n    ]\n  ]\n  map.set(\"J\", J);\n\n  const L = [\n    [\n      { row: 0, column: 3 },\n      { row: 0, column: 4 },\n      { row: 0, column: 5 },\n      { row: -1, column: 5 },\n    ],\n    [\n      { row: 0, column: 4 },\n      { row: 0, column: 5 },\n      { row: -1, column: 4 },\n      { row: -2, column: 4 },\n    ],\n    [\n      { row: -1, column: 3 },\n      { row: -1, column: 4 },\n      { row: -1, column: 5 },\n      { row: 0, column: 3 },\n    ],\n    [\n      { row: 0, column: 5 },\n      { row: -1, column: 5 },\n      { row: -2, column: 5 },\n      { row: -2, column: 4 },\n    ]\n  ]\n  map.set(\"L\", L);\n\n  const S = [\n    [\n      { row: 0, column: 3 },\n      { row: 0, column: 4 },\n      { row: -1, column: 4 },\n      { row: -1, column: 5 },\n    ],\n    [\n      { row: 0, column: 5 },\n      { row: -1, column: 5 },\n      { row: -1, column: 4 },\n      { row: -2, column: 4 },\n    ],\n  ];\n  map.set(\"S\", S);\n\n  const T = [\n    [\n      { row: 0, column: 3 },\n      { row: 0, column: 4 },\n      { row: 0, column: 5 },\n      { row: -1, column: 4 },\n    ],\n    [\n      { row: -2, column: 4 },\n      { row: -1, column: 4 },\n      { row: 0, column: 4 },\n      { row: -1, column: 5 },\n    ],\n    [\n      { row: -1, column: 3 },\n      { row: -1, column: 4 },\n      { row: -1, column: 5 },\n      { row: 0, column: 4 },\n    ],\n    [\n      { row: -2, column: 4 },\n      { row: -1, column: 4 },\n      { row: 0, column: 4 },\n      { row: -1, column: 3 },\n    ],\n  ];\n  map.set(\"T\", T);\n\n  const Z = [\n    [\n      { row: 0, column: 4 },\n      { row: 0, column: 5 },\n      { row: -1, column: 3 },\n      { row: -1, column: 4 },\n    ],\n    [\n      { row: 0, column: 4 },\n      { row: -1, column: 4 },\n      { row: -1, column: 5 },\n      { row: -2, column: 5 },\n    ],    \n  ];\n  map.set(\"Z\", Z);\n\n  return (key = \"I\") => ({\n    group: JSON.parse(JSON.stringify(map.get(key))),\n    point: 0,\n  });\n})();\n\nconst registBlock = [\n  \"I\",\n  \"O\",\n  \"J\",\n  \"L\",\n  \"S\",\n  \"T\",\n  \"Z\",\n];\n\nlet nextKey = null;\nconst setNextKey = (key) => {\n  nextKey = key;\n};\n\nlet regenerateNextKey = null;\nconst setRegenerateNextKey = (func) => {\n  regenerateNextKey = func;\n}\n\nconst getKey = () => {\n  if (nextKey !== null) {\n    const next = nextKey;\n    nextKey = null;\n    if (regenerateNextKey !== null) {\n      regenerateNextKey();\n    }\n    return next;\n  }\n  return registBlock[Math.floor(Math.random() * registBlock.length)];\n};\n\nexport { initFallingBlock, initTransform, getKey, setNextKey, setRegenerateNextKey };\n","let score = 0;\n\nconst initScore = () => {\n  score = 0;\n};\nconst eliminateScore = (num) => {\n  if (num === 0)  return;\n  score += 100 * 2 ** (num - 1);\n};\nconst mergeScore = (num) => {\n  score += 10 * num;\n};\nconst getScore = () => {\n  return score;\n};\n\nexport { initScore, eliminateScore, mergeScore, getScore };","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n  state: 0,\n};\n\nexport const RussiaCubeSlice = createSlice({\n  name: \"cube\",\n  initialState,\n  reducers: {\n    setState(state, payload) {\n      state.state = payload.payload;\n    },\n  }\n})\n\nexport const {\n  setState,\n} = RussiaCubeSlice.actions;\n\nexport default RussiaCubeSlice.reducer;\n","let pause = false;\nconst getPause = () => pause;\nconst setPause = value => pause = value;\n\nexport { getPause, setPause };","import React from \"react\";\nimport { Group } from \"../../../lib/canvas-in-react\";\nimport GameItem from \"../gameitem\";\nimport { initFallingBlock, initTransform, getKey } from \"../../util/initGame\";\nimport { eliminateScore, mergeScore, initScore } from \"../score\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setState } from \"../slice\";\nimport { getPause, setPause } from \"./pause\";\n\nfunction GamePanel(props) {\n  const gameModelRef = React.useRef(initGameModel());\n  const fallingBlock = React.useRef([]);\n  const transfromModel = React.useRef({});\n  const dispatch = useDispatch();\n  const state = useSelector((state) => state.cube.state);\n  \n  const initGame = React.useCallback(() => {\n    gameModelRef.current = initGameModel();\n    const key = getKey();\n    fallingBlock.current = initFallingBlock(key);\n    transfromModel.current = initTransform(key);\n    dispatch(setState(1));\n  }, [dispatch]);\n  \n  React.useEffect(() => {\n    const move = (where) => {\n      if (where === \"left\") {\n        let allowMove = true;\n        fallingBlock.current.shape.forEach((item) => {\n          if (item.column === 0) {\n            allowMove = false;\n          } else if (\n            gameModelRef.current[item.column - 1][item.row] &&\n            gameModelRef.current[item.column - 1][item.row].value !== 0\n          ) {\n            allowMove = false;\n          }\n        });\n        if (allowMove) {\n          fallingBlock.current.shape.forEach((item) => {\n            item.column--;\n          });\n          fallingBlock.current.offset.col--;\n        }\n      } else if (where === \"right\") {\n        let allowMove = true;\n        fallingBlock.current.shape.forEach((item) => {\n          if (item.column === 9) {\n            allowMove = false;\n          } else if (\n            gameModelRef.current[item.column + 1][item.row] &&\n            gameModelRef.current[item.column + 1][item.row].value !== 0\n          ) {\n            allowMove = false;\n          }\n        });\n        if (allowMove) {\n          fallingBlock.current.shape.forEach((item) => {\n            item.column++;\n          });\n          fallingBlock.current.offset.col++;\n        }\n      } else if (where === \"down\") {\n        let status;\n        const changedRow = [];\n        let shouldSpliceRow = [];\n        fallingBlock.current.shape.forEach((item) => {\n          if (item.row < 0) {\n            status = 0;\n          } else if (\n            item.row < 19 &&\n            gameModelRef.current[item.column][item.row + 1].value === 0 &&\n            status !== -1\n          ) {\n            // 成功向下移动后返回0\n            status = 0;\n          } else {\n            // 落地后返回-1\n            status = -1;\n          }\n        });\n        if (status === 0) {\n          fallingBlock.current.offset.row++;\n        }\n        fallingBlock.current.shape.forEach((item) => {\n          if (status === 0) {\n            item.row++;\n          } else {\n            gameModelRef.current[item.column][item.row].value = 1;\n            changedRow.push(item.row);\n          }\n        });\n        // 重新生成下落方块\n        if (status === -1) {\n          const key = getKey();\n          mergeScore(fallingBlock.current.shape.length);\n          fallingBlock.current = initFallingBlock(key);\n          transfromModel.current = initTransform(key);\n          fallingBlock.current.shape.forEach((item) => {\n            if (\n              gameModelRef.current[item.column][item.row] &&\n              gameModelRef.current[item.column][item.row].value === 1\n            ) {\n              dispatch(setState(-1));\n            }\n          });\n        }\n        // 检查是否需要进行消除\n        changedRow.forEach((row) => {\n          gameModelRef.current.every((column) => column[row].value === 1) &&\n            shouldSpliceRow.push(row);\n        });\n        // 行消除函数\n        shouldSpliceRow = Array.from(new Set(shouldSpliceRow)).sort(\n          (a, b) => a - b\n        );\n        for (let j = 0; j < shouldSpliceRow.length; j++) {\n          const row = shouldSpliceRow[j];\n          for (let i = 0; i < gameModelRef.current.length; i++) {\n            gameModelRef.current[i].splice(row, 1);\n            gameModelRef.current[i].unshift({ value: 0 });\n          }\n        }\n        eliminateScore(shouldSpliceRow.length);\n        return status;\n      } else if (where === \"up\") {\n        let point = transfromModel.current.point;\n        const lastPoint = point;\n        const group = transfromModel.current.group;\n        const offset = fallingBlock.current.offset;\n        const gameModel = gameModelRef.current;\n        if (point === group.length - 1) {\n          point = 0;\n        } else {\n          point++;\n        }\n        transfromModel.current.point = point;\n        const targetShape = JSON.parse(JSON.stringify(group[point]));\n        // 是否合并到shape的标识符\n        let merge = true;\n        targetShape.forEach((item) => {\n          item.row += offset.row;\n          item.column += offset.col;\n          if (item.column < 0 || item.column > 9) {\n            merge = false;\n          } else if (\n            gameModel[item.column][item.row] &&\n            gameModel[item.column][item.row].value === 1\n          ) {\n            merge = false;\n          }\n        });\n        if (merge) {\n          fallingBlock.current.shape = targetShape;\n        } else {\n          transfromModel.current.point = lastPoint;\n        }\n      } else if (where === \"space\") {\n        while (move(\"down\") !== -1) {}\n      }\n    };\n\n    // 暂停\n    const handlePause = () => {\n      const pause = getPause();\n      setPause(!pause);\n    }\n\n    document.onkeydown = (e) => {\n      const pause = getPause();\n      if (state === 1) {\n        switch (e.code) {\n          case \"ArrowRight\":\n            !pause && move(\"right\");\n            break;\n          case \"ArrowLeft\":\n            !pause && move(\"left\");\n            break;\n          case \"ArrowUp\":\n            !pause && move(\"up\");\n            break;\n          case \"ArrowDown\":\n            !pause && move(\"down\");\n            break;\n          case \"Space\":\n            !pause && move(\"space\");\n            break;\n          case \"KeyP\":\n            handlePause();\n            break;\n          default:\n            return;\n        }\n      } else if (state === -1) {\n        switch (e.code) {\n          case \"Space\":\n            initGame();\n            initScore();\n            break;\n          case \"Escape\":\n            dispatch(setState(0));\n            initScore();\n            break;\n          default:\n            break;\n        }\n      }\n    };\n\n    const initKey = getKey();\n    fallingBlock.current = initFallingBlock(initKey);\n    transfromModel.current = initTransform(initKey);\n \n    const interval = setInterval(() => {\n      const pause = getPause();\n      if (state === 1 && !pause) {\n        move(\"down\");\n      }\n      if (state === -1) {\n        clearInterval(interval);\n      }\n    }, 750);\n    return () => clearInterval(interval);\n  }, [dispatch, initGame, state]);\n  return (\n    <Group {...props}>\n      {initGameModel().map((column, columnIndex) =>\n        column.map((item, itemIndex) => (\n          <GameItem\n            column={columnIndex}\n            row={itemIndex}\n            data={{\n              gameModel: gameModelRef,\n              fallingBlock: fallingBlock,\n            }}\n          />\n        ))\n      )}\n    </Group>\n  );\n}\n\nfunction initGameModel() {\n  const result = [];\n  for (let i = 0; i < 10; i++) {\n    const column = [];\n    for (let j = 0; j < 20; j++) {\n      const item = {\n        value: 0,\n      };\n      column.push(item);\n    }\n    result.push(column);\n  }\n  return result;\n}\n\nexport default GamePanel;\n","import React from 'react';\nimport { Group, Rect, Text } from '../../../lib/canvas-in-react';\nimport { initFallingBlock, getKey, setNextKey, setRegenerateNextKey } from '../../util/initGame';\nimport GameItem from '../gameitem';\nimport { getScore } from '../score';\nimport { getPause } from '../gamepanel/pause';\nimport { useSelector } from \"react-redux\";\n\nconst Preview = (props) => {\n  const x = window.innerWidth / 2 + 202, y = window.innerHeight / 2 - 242;\n  const gameModelRef = React.useRef(initGameModel());\n  const fallingBlock = React.useRef([]);\n  const state = useSelector(state => state.cube.state);\n  \n  React.useEffect(() => {\n    const func = () => {\n      const key = getKey();\n      setNextKey(key);\n      fallingBlock.current = initFallingBlock(key);\n    }\n    func();\n    setRegenerateNextKey(func);\n  }, []);\n  const stateTitle = (() => {\n    if (state !== -1) {\n      return `State: ${getPause() ? 'Pause' : 'Play'}`\n    } else {\n      return \"State: Game Over\";\n    }\n  })();\n  const stateDescribe = (() => {\n    if (state !== -1) {\n      return `Press key 'P' to ${getPause() ? 'containue' : 'pause'}`;\n    } else {\n      return `'Space': new game.`;\n    }\n  })();\n  const stateDescribe2 = state === -1 ? `'ESC': back to menu.` : '';\n  return (\n    <Group {...props}>\n      <Rect\n        type=\"stroke\"\n        coordinate={{ x, y }}\n        size={{ width: 124, height: 124}}\n      />\n      <Rect\n        type=\"fill\"\n        color=\"rgba(0, 0, 0, 0.1)\"\n        coordinate={{ x, y }}\n        size={{\n          width: 124,\n          height: 124,\n        }}\n      />\n      <Text\n        coordinate={{ x: x + 61, y: y - 20 }}\n        text=\"Next Item\"\n      />\n      {initGameModel().map((column, columnIndex) =>\n        column.map((item, itemIndex) => (\n          <GameItem\n            key={`[${itemIndex}, ${columnIndex}]`}\n            column={columnIndex}\n            preview={true}\n            row={itemIndex}\n            data={{\n              gameModel: gameModelRef,\n              fallingBlock: fallingBlock,\n            }}\n            coordinate={{\n              x: 4 + x + 30 * columnIndex,\n              y: 4 + y + 30 * itemIndex,\n            }}\n          />\n        ))\n      )}\n      <Text\n        coordinate={{ x: x + 61, y: y + 220 }}\n        text=\"Score\"\n        font=\"24px YaHei\"\n        width={200}\n        align=\"center\"\n      />\n      <Text\n        coordinate={{ x: x + 61, y: y + 255 }}\n        text={() => getScore()}\n        width={200}\n        align=\"center\"\n      />  \n      <Text\n        coordinate={{ x: x + 61, y: y + 335 }}\n        text={stateTitle}\n        font=\"24px YaHei\"\n        width={200}\n        align=\"center\"\n      />\n      <Text\n        coordinate={{ x: x + 61, y: y + 365 }}\n        text={stateDescribe}\n        align=\"center\"\n      />\n      <Text\n        coordinate={{ x: x + 61, y: y + 385 }}\n        text={stateDescribe2}\n        align=\"center\"\n      />\n    </Group>\n  );\n};\n\nfunction initGameModel() {\n  const result = [];\n  for (let i = 0; i < 4; i++) {\n    const column = [];\n    for (let j = 0; j < 4; j++) {\n      const item = {\n        value: 0,\n      };\n      column.push(item);\n    }\n    result.push(column);\n  }\n  return result;\n}\n\nexport default Preview;","import React from \"react\";\nimport { Canvas, Layer, Rect, Group, useData } from \"../lib/canvas-in-react\";\nimport GamePanel from \"./components/gamepanel\";\nimport Preview from \"./components/preview\";\n\nfunction RussiaCube() {\n  const coordinate = React.useRef({ x: 0, y: 0 });\n  const variableSize = React.useRef(0);\n  const { updateStackForLayer, registUpdateFunc, removeUpdateFunc } = useData();\n\n  React.useEffect(() => {\n    const key = registUpdateFunc({\n      func: () => {\n        coordinate.current.y++;\n        coordinate.current.x++;\n        variableSize.current++;\n      },\n      frames: 1,\n      index: 0,\n    });\n    setTimeout(() => {\n      removeUpdateFunc(key);\n    }, 3000);\n  }, [registUpdateFunc, removeUpdateFunc]);\n\n  return (\n    <>\n      <Canvas>\n        <Layer fps={1}>\n          <Container />\n        </Layer>\n        <Layer updateStackForLayer={updateStackForLayer} fps={30}>\n          <GamePanel />\n          <Preview />\n        </Layer>\n      </Canvas>\n    </>\n  );\n}\n\nfunction Container(props) {\n  const width = 304,\n    height = 604;\n  const x = window.innerWidth / 2 - width / 2,\n    y = window.innerHeight / 2 - height / 2;\n  return (\n    <Group {...props}>\n      <Rect\n        type=\"stroke\"\n        coordinate={{ x, y }}\n        size={{\n          width,\n          height,\n        }}\n      />\n      <Rect\n        type=\"fill\"\n        color=\"rgba(0, 0, 0, 0.1)\"\n        coordinate={{ x, y }}\n        size={{\n          width,\n          height,\n        }}\n      />\n    </Group>\n  );\n}\n\nexport default RussiaCube;\n","import { useDispatch } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { setState } from \"../slice\";\n\nconst Container = styled.div`\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\nconst Item = styled.div`\n  width: 12rem;\n  height: 4rem;\n  margin: 1rem;\n  background-color: rgba(0, 0, 0, 0.15);\n  border: 4px solid rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 2rem;\n`;\n\nfunction Welcome(props) {\n  const dispatch = useDispatch();\n  const handleOnGameStart = () => {\n    dispatch(setState(1));\n  };\n  return (\n    <Container>\n      <h1>E LUO SI FANG KUAI</h1>\n      <Item onClick={handleOnGameStart}>Game Start</Item>\n      <Item>Help</Item>\n    </Container>\n  );\n}\n\nexport default Welcome;","import RussiaCube from \"./russia-cube\";\nimport { useSelector } from \"react-redux\";\nimport Welcome from \"./components/welcome\";\n\nfunction RussiaCubeRouter(props) {\n  const state = useSelector((state) => state.cube.state);\n  if (state === 0) {\n    return <Welcome />;\n  }\n  return <RussiaCube />;\n}\n\nexport default RussiaCubeRouter;\n","import Cells from \"../cells\";\nimport Header from \"../layout/Header\";\nimport TowerDefense from \"../tower-defense\";\nimport RussiaCube from \"../russia-cube\";\n\nexport const router = [\n  {\n    title: '空当接龙',\n    link: '/cells',\n    component: (\n      <>\n        <Header />\n        <Cells />\n      </>\n    )\n  },\n  {\n    title: '塔防游戏',\n    link: '/towerdefense',\n    component: (\n      <TowerDefense />\n    ),\n  },\n  {\n    title: '俄罗斯方块',\n    link: '/russia-cube',\n    component: (\n      <RussiaCube />\n    ),\n  },\n]","import styled from \"styled-components\";\n\nconst CardWrapper = styled.div`\n  width: 10rem;\n  height: 10rem;\n  background-color: white;\n  box-shadow: 0 0 4px 1px lightgray;\n  border-radius: 4px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: black;\n  margin: 0 0.5rem;\n  &:hover {\n    box-shadow: 0 0 6px 2px lightgray;\n    cursor: pointer;\n  }\n  @media(max-width: 768px) {\n    width: 44vw;\n    margin: 0;\n  }\n`;\n\nfunction Card(props) {\n  return (\n    <CardWrapper {...props} />\n  );\n}\n\nexport default Card;\n","import styled from \"styled-components\";\nimport { router } from \"./router\";\nimport Card from './component/card';\nimport { Link } from \"react-router-dom\";\n\nconst GameListWrapper = styled.div`\n  min-height: 100vh;\n  background-color: whitesmoke;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\nconst GameListContainer = styled.div`\n  @media (min-width: 1180px) {\n    width: 1180px;\n    padding: 0;\n  }\n  width: 100vw;\n  padding: 0 1rem;\n  box-sizing: border-box;\n`;\nconst Cards = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  @media (max-width: 768px) {\n    justify-content: space-between;\n  }\n`;\nconst Title = styled.h1`\n  margin: 0;\n  padding: 1rem 0;\n`;\n\nfunction GameList() {\n  return (\n    <GameListWrapper>\n      <GameListContainer>\n        <Title>- Game List</Title>\n        <Cards>\n          {router.map((item) => (\n            <Link to={item.link} key={item.title} style={{ textDecoration: 'none' }}>\n              <Card>{item.title}</Card>\n            </Link>\n          ))}\n        </Cards>\n      </GameListContainer>\n    </GameListWrapper>\n  );\n}\n\nexport default GameList;\n","import React from 'react';\nimport './App.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom';\nimport GameList from './gamelist';\nimport { router } from './gamelist/router';\n\nfunction App() {\n  return (\n    <Router>\n      <Switch>\n        {\n          router.map(item => (\n            <Route path={item.link} key={item.title}>\n              {item.component}\n            </Route>\n          ))\n        }\n        <Route exact path=\"/\">\n          <GameList />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport cellsReducer from \"./cells/cellsSlice\";\nimport russiaCubeReducer from \"./russia-cube/components/slice\";\n\nexport const store = configureStore({\n  reducer: {\n    cells: cellsReducer,\n    cube: russiaCubeReducer,\n  },\n})\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\nimport { store } from './store';\nimport { Provider } from 'react-redux';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}